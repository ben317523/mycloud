import{k as A,l as G,H as oe,r as V,o as re,h as ie,a as B,w as $,f as X,q as Y,F as se,u as ae,d as Q,G as ce}from"./index.a024d9c0.js";var ee={exports:{}};(function(O,j){(function(n){O.exports=n()})(function(){return function n(u,x,s){function o(t,e){if(!x[t]){if(!u[t]){var a=typeof G=="function"&&G;if(!e&&a)return a(t,!0);if(r)return r(t,!0);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}var l=x[t]={exports:{}};u[t][0].call(l.exports,function(d){return o(u[t][1][d]||d)},l,l.exports,n,u,x,s)}return x[t].exports}for(var r=typeof G=="function"&&G,i=0;i<s.length;i++)o(s[i]);return o}({1:[function(n,u,x){(function(s){(function(){var o=n("./transport-list");u.exports=n("./main")(o),"_sockjs_onload"in s&&setTimeout(s._sockjs_onload,1)}).call(this)}).call(this,typeof A!="undefined"?A:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./main":14,"./transport-list":16}],2:[function(n,u,x){var s=n("inherits"),o=n("./event");function r(){o.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}s(r,o),u.exports=r},{"./event":4,inherits:54}],3:[function(n,u,x){var s=n("inherits"),o=n("./eventtarget");function r(){o.call(this)}s(r,o),r.prototype.removeAllListeners=function(i){i?delete this._listeners[i]:this._listeners={}},r.prototype.once=function(i,t){var e=this,a=!1;this.on(i,function c(){e.removeListener(i,c),a||(a=!0,t.apply(this,arguments))})},r.prototype.emit=function(){var i=arguments[0],t=this._listeners[i];if(t){for(var e=arguments.length,a=new Array(e-1),c=1;c<e;c++)a[c-1]=arguments[c];for(var l=0;l<t.length;l++)t[l].apply(this,a)}},r.prototype.on=r.prototype.addListener=o.prototype.addEventListener,r.prototype.removeListener=o.prototype.removeEventListener,u.exports.EventEmitter=r},{"./eventtarget":5,inherits:54}],4:[function(n,u,x){function s(o){this.type=o}s.prototype.initEvent=function(o,r,i){return this.type=o,this.bubbles=r,this.cancelable=i,this.timeStamp=+new Date,this},s.prototype.stopPropagation=function(){},s.prototype.preventDefault=function(){},s.CAPTURING_PHASE=1,s.AT_TARGET=2,s.BUBBLING_PHASE=3,u.exports=s},{}],5:[function(n,u,x){function s(){this._listeners={}}s.prototype.addEventListener=function(o,r){o in this._listeners||(this._listeners[o]=[]);var i=this._listeners[o];i.indexOf(r)===-1&&(i=i.concat([r])),this._listeners[o]=i},s.prototype.removeEventListener=function(o,r){var i=this._listeners[o];if(i){var t=i.indexOf(r);t===-1||(1<i.length?this._listeners[o]=i.slice(0,t).concat(i.slice(t+1)):delete this._listeners[o])}},s.prototype.dispatchEvent=function(){var o=arguments[0],r=o.type,i=arguments.length===1?[o]:Array.apply(null,arguments);if(this["on"+r]&&this["on"+r].apply(this,i),r in this._listeners)for(var t=this._listeners[r],e=0;e<t.length;e++)t[e].apply(this,i)},u.exports=s},{}],6:[function(n,u,x){var s=n("inherits"),o=n("./event");function r(i){o.call(this),this.initEvent("message",!1,!1),this.data=i}s(r,o),u.exports=r},{"./event":4,inherits:54}],7:[function(n,u,x){var s=n("./utils/iframe");function o(r){(this._transport=r).on("message",this._transportMessage.bind(this)),r.on("close",this._transportClose.bind(this))}o.prototype._transportClose=function(r,i){s.postMessage("c",JSON.stringify([r,i]))},o.prototype._transportMessage=function(r){s.postMessage("t",r)},o.prototype._send=function(r){this._transport.send(r)},o.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},u.exports=o},{"./utils/iframe":47}],8:[function(n,u,x){var s=n("./utils/url"),o=n("./utils/event"),r=n("./facade"),i=n("./info-iframe-receiver"),t=n("./utils/iframe"),e=n("./location"),a=function(){};u.exports=function(c,l){var d,m={};l.forEach(function(f){f.facadeTransport&&(m[f.facadeTransport.transportName]=f.facadeTransport)}),m[i.transportName]=i,c.bootstrap_iframe=function(){var f;t.currentWindowId=e.hash.slice(1),o.attachEvent("message",function(h){if(h.source===parent&&(d===void 0&&(d=h.origin),h.origin===d)){var S;try{S=JSON.parse(h.data)}catch{return void a("bad json",h.data)}if(S.windowId===t.currentWindowId)switch(S.type){case"s":var E;try{E=JSON.parse(S.data)}catch{a("bad json",S.data);break}var N=E[0],y=E[1],v=E[2],_=E[3];if(N!==c.version)throw new Error('Incompatible SockJS! Main site uses: "'+N+'", the iframe: "'+c.version+'".');if(!s.isOriginEqual(v,e.href)||!s.isOriginEqual(_,e.href))throw new Error("Can't connect to different domain from within an iframe. ("+e.href+", "+v+", "+_+")");f=new r(new m[y](v,_));break;case"m":f._send(S.data);break;case"c":f&&f._close(),f=null}}}),t.postMessage("s")}}},{"./facade":7,"./info-iframe-receiver":10,"./location":13,"./utils/event":46,"./utils/iframe":47,"./utils/url":52,debug:void 0}],9:[function(n,u,x){var s=n("events").EventEmitter,o=n("inherits"),r=n("./utils/object");function i(t,e){s.call(this);var a=this,c=+new Date;this.xo=new e("GET",t),this.xo.once("finish",function(l,d){var m,f;if(l===200){if(f=+new Date-c,d)try{m=JSON.parse(d)}catch{}r.isObject(m)||(m={})}a.emit("finish",m,f),a.removeAllListeners()})}o(i,s),i.prototype.close=function(){this.removeAllListeners(),this.xo.close()},u.exports=i},{"./utils/object":49,debug:void 0,events:3,inherits:54}],10:[function(n,u,x){var s=n("inherits"),o=n("events").EventEmitter,r=n("./transport/sender/xhr-local"),i=n("./info-ajax");function t(e){var a=this;o.call(this),this.ir=new i(e,r),this.ir.once("finish",function(c,l){a.ir=null,a.emit("message",JSON.stringify([c,l]))})}s(t,o),t.transportName="iframe-info-receiver",t.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},u.exports=t},{"./info-ajax":9,"./transport/sender/xhr-local":37,events:3,inherits:54}],11:[function(n,u,x){(function(s){(function(){var o=n("events").EventEmitter,r=n("inherits"),i=n("./utils/event"),t=n("./transport/iframe"),e=n("./info-iframe-receiver");function a(c,l){var d=this;o.call(this);function m(){var f=d.ifr=new t(e.transportName,l,c);f.once("message",function(h){if(h){var S;try{S=JSON.parse(h)}catch{return d.emit("finish"),void d.close()}var E=S[0],N=S[1];d.emit("finish",E,N)}d.close()}),f.once("close",function(){d.emit("finish"),d.close()})}s.document.body?m():i.attachEvent("load",m)}r(a,o),a.enabled=function(){return t.enabled()},a.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},u.exports=a}).call(this)}).call(this,typeof A!="undefined"?A:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./info-iframe-receiver":10,"./transport/iframe":22,"./utils/event":46,debug:void 0,events:3,inherits:54}],12:[function(n,u,x){var s=n("events").EventEmitter,o=n("inherits"),r=n("./utils/url"),i=n("./transport/sender/xdr"),t=n("./transport/sender/xhr-cors"),e=n("./transport/sender/xhr-local"),a=n("./transport/sender/xhr-fake"),c=n("./info-iframe"),l=n("./info-ajax");function d(m,f){var h=this;s.call(this),setTimeout(function(){h.doXhr(m,f)},0)}o(d,s),d._getReceiver=function(m,f,h){return h.sameOrigin?new l(f,e):t.enabled?new l(f,t):i.enabled&&h.sameScheme?new l(f,i):c.enabled()?new c(m,f):new l(f,a)},d.prototype.doXhr=function(m,f){var h=this,S=r.addPath(m,"/info");this.xo=d._getReceiver(m,S,f),this.timeoutRef=setTimeout(function(){h._cleanup(!1),h.emit("finish")},d.timeout),this.xo.once("finish",function(E,N){h._cleanup(!0),h.emit("finish",E,N)})},d.prototype._cleanup=function(m){clearTimeout(this.timeoutRef),this.timeoutRef=null,!m&&this.xo&&this.xo.close(),this.xo=null},d.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)},d.timeout=8e3,u.exports=d},{"./info-ajax":9,"./info-iframe":11,"./transport/sender/xdr":34,"./transport/sender/xhr-cors":35,"./transport/sender/xhr-fake":36,"./transport/sender/xhr-local":37,"./utils/url":52,debug:void 0,events:3,inherits:54}],13:[function(n,u,x){(function(s){(function(){u.exports=s.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}}).call(this)}).call(this,typeof A!="undefined"?A:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],14:[function(n,u,x){(function(s){(function(){n("./shims");var o,r=n("url-parse"),i=n("inherits"),t=n("./utils/random"),e=n("./utils/escape"),a=n("./utils/url"),c=n("./utils/event"),l=n("./utils/transport"),d=n("./utils/object"),m=n("./utils/browser"),f=n("./utils/log"),h=n("./event/event"),S=n("./event/eventtarget"),E=n("./location"),N=n("./event/close"),y=n("./event/trans-message"),v=n("./info-receiver"),_=function(){};function p(b,C,g){if(!(this instanceof p))return new p(b,C,g);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");S.call(this),this.readyState=p.CONNECTING,this.extensions="",this.protocol="",(g=g||{}).protocols_whitelist&&f.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=g.transports,this._transportOptions=g.transportOptions||{},this._timeout=g.timeout||0;var k=g.sessionId||8;if(typeof k=="function")this._generateSessionId=k;else{if(typeof k!="number")throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return t.string(k)}}this._server=g.server||t.numberString(1e3);var T=new r(b);if(!T.host||!T.protocol)throw new SyntaxError("The URL '"+b+"' is invalid");if(T.hash)throw new SyntaxError("The URL must not contain a fragment");if(T.protocol!=="http:"&&T.protocol!=="https:")throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+T.protocol+"' is not allowed.");var L=T.protocol==="https:";if(E.protocol==="https:"&&!L&&!a.isLoopbackAddr(T.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");C?Array.isArray(C)||(C=[C]):C=[];var w=C.sort();w.forEach(function(R,M){if(!R)throw new SyntaxError("The protocols entry '"+R+"' is invalid.");if(M<w.length-1&&R===w[M+1])throw new SyntaxError("The protocols entry '"+R+"' is duplicated.")});var P=a.getOrigin(E.href);this._origin=P?P.toLowerCase():null,T.set("pathname",T.pathname.replace(/\/+$/,"")),this.url=T.href,_("using url",this.url),this._urlInfo={nullOrigin:!m.hasDomain(),sameOrigin:a.isOriginEqual(this.url,E.href),sameScheme:a.isSchemeEqual(this.url,E.href)},this._ir=new v(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function I(b){return b===1e3||3e3<=b&&b<=4999}i(p,S),p.prototype.close=function(b,C){if(b&&!I(b))throw new Error("InvalidAccessError: Invalid code");if(C&&123<C.length)throw new SyntaxError("reason argument has an invalid length");this.readyState!==p.CLOSING&&this.readyState!==p.CLOSED&&this._close(b||1e3,C||"Normal closure",!0)},p.prototype.send=function(b){if(typeof b!="string"&&(b=""+b),this.readyState===p.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===p.OPEN&&this._transport.send(e.quote(b))},p.version=n("./version"),p.CONNECTING=0,p.OPEN=1,p.CLOSING=2,p.CLOSED=3,p.prototype._receiveInfo=function(b,C){if(this._ir=null,b){this._rto=this.countRTO(C),this._transUrl=b.base_url?b.base_url:this.url,b=d.extend(b,this._urlInfo);var g=o.filterToEnabled(this._transportsWhitelist,b);this._transports=g.main,_(this._transports.length+" enabled transports"),this._connect()}else this._close(1002,"Cannot connect to server")},p.prototype._connect=function(){for(var b=this._transports.shift();b;b=this._transports.shift()){if(_("attempt",b.transportName),b.needBody&&(!s.document.body||s.document.readyState!==void 0&&s.document.readyState!=="complete"&&s.document.readyState!=="interactive"))return this._transports.unshift(b),void c.attachEvent("load",this._connect.bind(this));var C=Math.max(this._timeout,this._rto*b.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),C);var g=a.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),k=this._transportOptions[b.transportName],T=new b(g,this._transUrl,k);return T.on("message",this._transportMessage.bind(this)),T.once("close",this._transportClose.bind(this)),T.transportName=b.transportName,void(this._transport=T)}this._close(2e3,"All transports failed",!1)},p.prototype._transportTimeout=function(){this.readyState===p.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},p.prototype._transportMessage=function(b){var C,g=this,k=b.slice(0,1),T=b.slice(1);switch(k){case"o":return void this._open();case"h":return this.dispatchEvent(new h("heartbeat")),void _("heartbeat",this.transport)}if(T)try{C=JSON.parse(T)}catch{}if(C!==void 0)switch(k){case"a":Array.isArray(C)&&C.forEach(function(L){_("message",g.transport),g.dispatchEvent(new y(L))});break;case"m":_("message",this.transport),this.dispatchEvent(new y(C));break;case"c":Array.isArray(C)&&C.length===2&&this._close(C[0],C[1],!0)}},p.prototype._transportClose=function(b,C){_("_transportClose",this.transport),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),I(b)||b===2e3||this.readyState!==p.CONNECTING?this._close(b,C):this._connect()},p.prototype._open=function(){_("_open",this._transport&&this._transport.transportName,this.readyState),this.readyState===p.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=p.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new h("open")),_("connected",this.transport)):this._close(1006,"Server lost session")},p.prototype._close=function(b,C,g){_("_close",this.transport,b,C,g,this.readyState);var k=!1;if(this._ir&&(k=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===p.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=p.CLOSING,setTimeout(function(){this.readyState=p.CLOSED,k&&this.dispatchEvent(new h("error"));var T=new N("close");T.wasClean=g||!1,T.code=b||1e3,T.reason=C,this.dispatchEvent(T),this.onmessage=this.onclose=this.onerror=null}.bind(this),0)},p.prototype.countRTO=function(b){return 100<b?4*b:300+b},u.exports=function(b){return o=l(b),n("./iframe-bootstrap")(p,b),p}}).call(this)}).call(this,typeof A!="undefined"?A:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./event/close":2,"./event/event":4,"./event/eventtarget":5,"./event/trans-message":6,"./iframe-bootstrap":8,"./info-receiver":12,"./location":13,"./shims":15,"./utils/browser":44,"./utils/escape":45,"./utils/event":46,"./utils/log":48,"./utils/object":49,"./utils/random":50,"./utils/transport":51,"./utils/url":52,"./version":53,debug:void 0,inherits:54,"url-parse":57}],15:[function(n,u,x){function s(g){return t.toString.call(g)==="[object Function]"}function o(g){return l.call(g)==="[object String]"}var r,i=Array.prototype,t=Object.prototype,e=Function.prototype,a=String.prototype,c=i.slice,l=t.toString,d=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch{return!1}}();r=d?function(g,k,T,L){!L&&k in g||Object.defineProperty(g,k,{configurable:!0,enumerable:!1,writable:!0,value:T})}:function(g,k,T,L){!L&&k in g||(g[k]=T)};function m(g,k,T){for(var L in k)t.hasOwnProperty.call(k,L)&&r(g,L,k[L],T)}function f(g){if(g==null)throw new TypeError("can't convert "+g+" to object");return Object(g)}function h(){}m(e,{bind:function(g){var k=this;if(!s(k))throw new TypeError("Function.prototype.bind called on incompatible "+k);for(var T=c.call(arguments,1),L=Math.max(0,k.length-T.length),w=[],P=0;P<L;P++)w.push("$"+P);var R=Function("binder","return function ("+w.join(",")+"){ return binder.apply(this, arguments); }")(function(){if(this instanceof R){var M=k.apply(this,T.concat(c.call(arguments)));return Object(M)===M?M:this}return k.apply(g,T.concat(c.call(arguments)))});return k.prototype&&(h.prototype=k.prototype,R.prototype=new h,h.prototype=null),R}}),m(Array,{isArray:function(g){return l.call(g)==="[object Array]"}});var S,E,N,y=Object("a"),v=y[0]!=="a"||!(0 in y);m(i,{forEach:function(g,k){var T=f(this),L=v&&o(this)?this.split(""):T,w=k,P=-1,R=L.length>>>0;if(!s(g))throw new TypeError;for(;++P<R;)P in L&&g.call(w,L[P],P,T)}},(S=i.forEach,N=E=!0,S&&(S.call("foo",function(g,k,T){typeof T!="object"&&(E=!1)}),S.call([1],function(){N=typeof this=="string"},"x")),!(S&&E&&N)));var _=Array.prototype.indexOf&&[0,1].indexOf(1,2)!==-1;m(i,{indexOf:function(g,k){var T=v&&o(this)?this.split(""):f(this),L=T.length>>>0;if(!L)return-1;var w=0;for(1<arguments.length&&(w=function(P){var R=+P;return R!=R?R=0:R!==0&&R!==1/0&&R!==-1/0&&(R=(0<R||-1)*Math.floor(Math.abs(R))),R}(k)),w=0<=w?w:Math.max(0,L+w);w<L;w++)if(w in T&&T[w]===g)return w;return-1}},_);var p,I=a.split;"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||1<".".split(/()()/).length?(p=/()??/.exec("")[1]===void 0,a.split=function(g,k){var T=this;if(g===void 0&&k===0)return[];if(l.call(g)!=="[object RegExp]")return I.call(this,g,k);var L,w,P,R,M=[],W=(g.ignoreCase?"i":"")+(g.multiline?"m":"")+(g.extended?"x":"")+(g.sticky?"y":""),U=0;for(g=new RegExp(g.source,W+"g"),T+="",p||(L=new RegExp("^"+g.source+"$(?!\\s)",W)),k=k===void 0?-1>>>0:function(q){return q>>>0}(k);(w=g.exec(T))&&!(U<(P=w.index+w[0].length)&&(M.push(T.slice(U,w.index)),!p&&1<w.length&&w[0].replace(L,function(){for(var q=1;q<arguments.length-2;q++)arguments[q]===void 0&&(w[q]=void 0)}),1<w.length&&w.index<T.length&&i.push.apply(M,w.slice(1)),R=w[0].length,U=P,M.length>=k));)g.lastIndex===w.index&&g.lastIndex++;return U===T.length?!R&&g.test("")||M.push(""):M.push(T.slice(U)),M.length>k?M.slice(0,k):M}):"0".split(void 0,0).length&&(a.split=function(g,k){return g===void 0&&k===0?[]:I.call(this,g,k)});var b=a.substr,C="".substr&&"0b".substr(-1)!=="b";m(a,{substr:function(g,k){return b.call(this,g<0&&(g=this.length+g)<0?0:g,k)}},C)},{}],16:[function(n,u,x){u.exports=[n("./transport/websocket"),n("./transport/xhr-streaming"),n("./transport/xdr-streaming"),n("./transport/eventsource"),n("./transport/lib/iframe-wrap")(n("./transport/eventsource")),n("./transport/htmlfile"),n("./transport/lib/iframe-wrap")(n("./transport/htmlfile")),n("./transport/xhr-polling"),n("./transport/xdr-polling"),n("./transport/lib/iframe-wrap")(n("./transport/xhr-polling")),n("./transport/jsonp-polling")]},{"./transport/eventsource":20,"./transport/htmlfile":21,"./transport/jsonp-polling":23,"./transport/lib/iframe-wrap":26,"./transport/websocket":38,"./transport/xdr-polling":39,"./transport/xdr-streaming":40,"./transport/xhr-polling":41,"./transport/xhr-streaming":42}],17:[function(n,u,x){(function(s){(function(){var o=n("events").EventEmitter,r=n("inherits"),i=n("../../utils/event"),t=n("../../utils/url"),e=s.XMLHttpRequest,a=function(){};function c(m,f,h,S){var E=this;o.call(this),setTimeout(function(){E._start(m,f,h,S)},0)}r(c,o),c.prototype._start=function(m,f,h,S){var E=this;try{this.xhr=new e}catch{}if(!this.xhr)return this.emit("finish",0,"no xhr support"),void this._cleanup();f=t.addQuery(f,"t="+ +new Date),this.unloadRef=i.unloadAdd(function(){E._cleanup(!0)});try{this.xhr.open(m,f,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){a("xhr timeout"),E.emit("finish",0,""),E._cleanup(!1)})}catch{return this.emit("finish",0,""),void this._cleanup(!1)}if(S&&S.noCredentials||!c.supportsCORS||(this.xhr.withCredentials=!0),S&&S.headers)for(var N in S.headers)this.xhr.setRequestHeader(N,S.headers[N]);this.xhr.onreadystatechange=function(){if(E.xhr){var y,v,_=E.xhr;switch(a("readyState",_.readyState),_.readyState){case 3:try{v=_.status,y=_.responseText}catch{}v===1223&&(v=204),v===200&&y&&0<y.length&&E.emit("chunk",v,y);break;case 4:v=_.status,v===1223&&(v=204),v!==12005&&v!==12029||(v=0),a("finish",v,_.responseText),E.emit("finish",v,_.responseText),E._cleanup(!1)}}};try{E.xhr.send(h)}catch{E.emit("finish",0,""),E._cleanup(!1)}},c.prototype._cleanup=function(m){if(this.xhr){if(this.removeAllListeners(),i.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),m)try{this.xhr.abort()}catch{}this.unloadRef=this.xhr=null}},c.prototype.close=function(){this._cleanup(!0)},c.enabled=!!e;var l=["Active"].concat("Object").join("X");!c.enabled&&l in s&&(c.enabled=!!new(e=function(){try{return new s[l]("Microsoft.XMLHTTP")}catch{return null}}));var d=!1;try{d="withCredentials"in new e}catch{}c.supportsCORS=d,u.exports=c}).call(this)}).call(this,typeof A!="undefined"?A:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../../utils/event":46,"../../utils/url":52,debug:void 0,events:3,inherits:54}],18:[function(n,u,x){(function(s){(function(){u.exports=s.EventSource}).call(this)}).call(this,typeof A!="undefined"?A:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],19:[function(n,u,x){(function(s){(function(){var o=s.WebSocket||s.MozWebSocket;u.exports=o?function(r){return new o(r)}:void 0}).call(this)}).call(this,typeof A!="undefined"?A:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],20:[function(n,u,x){var s=n("inherits"),o=n("./lib/ajax-based"),r=n("./receiver/eventsource"),i=n("./sender/xhr-cors"),t=n("eventsource");function e(a){if(!e.enabled())throw new Error("Transport created when disabled");o.call(this,a,"/eventsource",r,i)}s(e,o),e.enabled=function(){return!!t},e.transportName="eventsource",e.roundTrips=2,u.exports=e},{"./lib/ajax-based":24,"./receiver/eventsource":29,"./sender/xhr-cors":35,eventsource:18,inherits:54}],21:[function(n,u,x){var s=n("inherits"),o=n("./receiver/htmlfile"),r=n("./sender/xhr-local"),i=n("./lib/ajax-based");function t(e){if(!o.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/htmlfile",o,r)}s(t,i),t.enabled=function(e){return o.enabled&&e.sameOrigin},t.transportName="htmlfile",t.roundTrips=2,u.exports=t},{"./lib/ajax-based":24,"./receiver/htmlfile":30,"./sender/xhr-local":37,inherits:54}],22:[function(n,u,x){var s=n("inherits"),o=n("events").EventEmitter,r=n("../version"),i=n("../utils/url"),t=n("../utils/iframe"),e=n("../utils/event"),a=n("../utils/random"),c=function(){};function l(d,m,f){if(!l.enabled())throw new Error("Transport created when disabled");o.call(this);var h=this;this.origin=i.getOrigin(f),this.baseUrl=f,this.transUrl=m,this.transport=d,this.windowId=a.string(8);var S=i.addPath(f,"/iframe.html")+"#"+this.windowId;this.iframeObj=t.createIframe(S,function(E){h.emit("close",1006,"Unable to load an iframe ("+E+")"),h.close()}),this.onmessageCallback=this._message.bind(this),e.attachEvent("message",this.onmessageCallback)}s(l,o),l.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){e.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch{}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},l.prototype._message=function(d){if(c("message",d.data),i.isOriginEqual(d.origin,this.origin)){var m;try{m=JSON.parse(d.data)}catch{return void c("bad json",d.data)}if(m.windowId===this.windowId)switch(m.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([r,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",m.data);break;case"c":var f;try{f=JSON.parse(m.data)}catch{return void c("bad json",m.data)}this.emit("close",f[0],f[1]),this.close()}else c("mismatched window id",m.windowId,this.windowId)}else c("not same origin",d.origin,this.origin)},l.prototype.postMessage=function(d,m){this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:d,data:m||""}),this.origin)},l.prototype.send=function(d){this.postMessage("m",d)},l.enabled=function(){return t.iframeEnabled},l.transportName="iframe",l.roundTrips=2,u.exports=l},{"../utils/event":46,"../utils/iframe":47,"../utils/random":50,"../utils/url":52,"../version":53,debug:void 0,events:3,inherits:54}],23:[function(n,u,x){(function(s){(function(){var o=n("inherits"),r=n("./lib/sender-receiver"),i=n("./receiver/jsonp"),t=n("./sender/jsonp");function e(a){if(!e.enabled())throw new Error("Transport created when disabled");r.call(this,a,"/jsonp",t,i)}o(e,r),e.enabled=function(){return!!s.document},e.transportName="jsonp-polling",e.roundTrips=1,e.needBody=!0,u.exports=e}).call(this)}).call(this,typeof A!="undefined"?A:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./lib/sender-receiver":28,"./receiver/jsonp":31,"./sender/jsonp":33,inherits:54}],24:[function(n,u,x){var s=n("inherits"),o=n("../../utils/url"),r=n("./sender-receiver");function i(t,e,a,c){r.call(this,t,e,function(l){return function(d,m,f){var h={};typeof m=="string"&&(h.headers={"Content-type":"text/plain"});var S=o.addPath(d,"/xhr_send"),E=new l("POST",S,m,h);return E.once("finish",function(N){if(E=null,N!==200&&N!==204)return f(new Error("http status "+N));f()}),function(){E.close(),E=null;var N=new Error("Aborted");N.code=1e3,f(N)}}}(c),a,c)}s(i,r),u.exports=i},{"../../utils/url":52,"./sender-receiver":28,debug:void 0,inherits:54}],25:[function(n,u,x){var s=n("inherits"),o=n("events").EventEmitter,r=function(){};function i(t,e){o.call(this),this.sendBuffer=[],this.sender=e,this.url=t}s(i,o),i.prototype.send=function(t){this.sendBuffer.push(t),this.sendStop||this.sendSchedule()},i.prototype.sendScheduleWait=function(){var t,e=this;this.sendStop=function(){e.sendStop=null,clearTimeout(t)},t=setTimeout(function(){e.sendStop=null,e.sendSchedule()},25)},i.prototype.sendSchedule=function(){r("sendSchedule",this.sendBuffer.length);var t=this;if(0<this.sendBuffer.length){var e="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,e,function(a){t.sendStop=null,a?(t.emit("close",a.code||1006,"Sending error: "+a),t.close()):t.sendScheduleWait()}),this.sendBuffer=[]}},i.prototype._cleanup=function(){this.removeAllListeners()},i.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},u.exports=i},{debug:void 0,events:3,inherits:54}],26:[function(n,u,x){(function(s){(function(){var o=n("inherits"),r=n("../iframe"),i=n("../../utils/object");u.exports=function(t){function e(a,c){r.call(this,t.transportName,a,c)}return o(e,r),e.enabled=function(a,c){if(!s.document)return!1;var l=i.extend({},c);return l.sameOrigin=!0,t.enabled(l)&&r.enabled()},e.transportName="iframe-"+t.transportName,e.needBody=!0,e.roundTrips=r.roundTrips+t.roundTrips-1,e.facadeTransport=t,e}}).call(this)}).call(this,typeof A!="undefined"?A:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../../utils/object":49,"../iframe":22,inherits:54}],27:[function(n,u,x){var s=n("inherits"),o=n("events").EventEmitter,r=function(){};function i(t,e,a){o.call(this),this.Receiver=t,this.receiveUrl=e,this.AjaxObject=a,this._scheduleReceiver()}s(i,o),i.prototype._scheduleReceiver=function(){var t=this,e=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);e.on("message",function(a){t.emit("message",a)}),e.once("close",function(a,c){r("close",a,c,t.pollIsClosing),t.poll=e=null,t.pollIsClosing||(c==="network"?t._scheduleReceiver():(t.emit("close",a||1006,c),t.removeAllListeners()))})},i.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},u.exports=i},{debug:void 0,events:3,inherits:54}],28:[function(n,u,x){var s=n("inherits"),o=n("../../utils/url"),r=n("./buffered-sender"),i=n("./polling");function t(e,a,c,l,d){var m=o.addPath(e,a),f=this;r.call(this,e,c),this.poll=new i(l,m,d),this.poll.on("message",function(h){f.emit("message",h)}),this.poll.once("close",function(h,S){f.poll=null,f.emit("close",h,S),f.close()})}s(t,r),t.prototype.close=function(){r.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},u.exports=t},{"../../utils/url":52,"./buffered-sender":25,"./polling":27,debug:void 0,inherits:54}],29:[function(n,u,x){var s=n("inherits"),o=n("events").EventEmitter,r=n("eventsource"),i=function(){};function t(e){o.call(this);var a=this,c=this.es=new r(e);c.onmessage=function(l){i("message",l.data),a.emit("message",decodeURI(l.data))},c.onerror=function(l){i("error",c.readyState);var d=c.readyState!==2?"network":"permanent";a._cleanup(),a._close(d)}}s(t,o),t.prototype.abort=function(){this._cleanup(),this._close("user")},t.prototype._cleanup=function(){var e=this.es;e&&(e.onmessage=e.onerror=null,e.close(),this.es=null)},t.prototype._close=function(e){var a=this;setTimeout(function(){a.emit("close",null,e),a.removeAllListeners()},200)},u.exports=t},{debug:void 0,events:3,eventsource:18,inherits:54}],30:[function(n,u,x){(function(s){(function(){var o=n("inherits"),r=n("../../utils/iframe"),i=n("../../utils/url"),t=n("events").EventEmitter,e=n("../../utils/random"),a=function(){};function c(d){t.call(this);var m=this;r.polluteGlobalNamespace(),this.id="a"+e.string(6),d=i.addQuery(d,"c="+decodeURIComponent(r.WPrefix+"."+this.id)),a("using htmlfile",c.htmlfileEnabled);var f=c.htmlfileEnabled?r.createHtmlfile:r.createIframe;s[r.WPrefix][this.id]={start:function(){m.iframeObj.loaded()},message:function(h){m.emit("message",h)},stop:function(){m._cleanup(),m._close("network")}},this.iframeObj=f(d,function(){m._cleanup(),m._close("permanent")})}o(c,t),c.prototype.abort=function(){this._cleanup(),this._close("user")},c.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete s[r.WPrefix][this.id]},c.prototype._close=function(d){this.emit("close",null,d),this.removeAllListeners()},c.htmlfileEnabled=!1;var l=["Active"].concat("Object").join("X");if(l in s)try{c.htmlfileEnabled=!!new s[l]("htmlfile")}catch{}c.enabled=c.htmlfileEnabled||r.iframeEnabled,u.exports=c}).call(this)}).call(this,typeof A!="undefined"?A:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,debug:void 0,events:3,inherits:54}],31:[function(n,u,x){(function(s){(function(){var o=n("../../utils/iframe"),r=n("../../utils/random"),i=n("../../utils/browser"),t=n("../../utils/url"),e=n("inherits"),a=n("events").EventEmitter,c=function(){};function l(d){var m=this;a.call(this),o.polluteGlobalNamespace(),this.id="a"+r.string(6);var f=t.addQuery(d,"c="+encodeURIComponent(o.WPrefix+"."+this.id));s[o.WPrefix][this.id]=this._callback.bind(this),this._createScript(f),this.timeoutId=setTimeout(function(){m._abort(new Error("JSONP script loaded abnormally (timeout)"))},l.timeout)}e(l,a),l.prototype.abort=function(){if(s[o.WPrefix][this.id]){var d=new Error("JSONP user aborted read");d.code=1e3,this._abort(d)}},l.timeout=35e3,l.scriptErrorTimeout=1e3,l.prototype._callback=function(d){this._cleanup(),this.aborting||(d&&this.emit("message",d),this.emit("close",null,"network"),this.removeAllListeners())},l.prototype._abort=function(d){this._cleanup(),this.aborting=!0,this.emit("close",d.code,d.message),this.removeAllListeners()},l.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var d=this.script;d.parentNode.removeChild(d),d.onreadystatechange=d.onerror=d.onload=d.onclick=null,this.script=null}delete s[o.WPrefix][this.id]},l.prototype._scriptError=function(){var d=this;this.errorTimer||(this.errorTimer=setTimeout(function(){d.loadedOkay||d._abort(new Error("JSONP script loaded abnormally (onerror)"))},l.scriptErrorTimeout))},l.prototype._createScript=function(d){var m,f=this,h=this.script=s.document.createElement("script");if(h.id="a"+r.string(8),h.src=d,h.type="text/javascript",h.charset="UTF-8",h.onerror=this._scriptError.bind(this),h.onload=function(){f._abort(new Error("JSONP script loaded abnormally (onload)"))},h.onreadystatechange=function(){if(c("onreadystatechange",h.readyState),/loaded|closed/.test(h.readyState)){if(h&&h.htmlFor&&h.onclick){f.loadedOkay=!0;try{h.onclick()}catch{}}h&&f._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},h.async===void 0&&s.document.attachEvent)if(i.isOpera())(m=this.script2=s.document.createElement("script")).text="try{var a = document.getElementById('"+h.id+"'); if(a)a.onerror();}catch(x){};",h.async=m.async=!1;else{try{h.htmlFor=h.id,h.event="onclick"}catch{}h.async=!0}h.async!==void 0&&(h.async=!0);var S=s.document.getElementsByTagName("head")[0];S.insertBefore(h,S.firstChild),m&&S.insertBefore(m,S.firstChild)},u.exports=l}).call(this)}).call(this,typeof A!="undefined"?A:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../../utils/browser":44,"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,debug:void 0,events:3,inherits:54}],32:[function(n,u,x){var s=n("inherits"),o=n("events").EventEmitter;function r(i,t){o.call(this);var e=this;this.bufferPosition=0,this.xo=new t("POST",i,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(a,c){e._chunkHandler(a,c),e.xo=null;var l=a===200?"network":"permanent";e.emit("close",null,l),e._cleanup()})}s(r,o),r.prototype._chunkHandler=function(i,t){if(i===200&&t)for(var e=-1;;this.bufferPosition+=e+1){var a=t.slice(this.bufferPosition);if((e=a.indexOf(`
`))===-1)break;var c=a.slice(0,e);c&&this.emit("message",c)}},r.prototype._cleanup=function(){this.removeAllListeners()},r.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()},u.exports=r},{debug:void 0,events:3,inherits:54}],33:[function(n,u,x){(function(s){(function(){var o,r,i=n("../../utils/random"),t=n("../../utils/url"),e=function(){};u.exports=function(a,c,l){o||((o=s.document.createElement("form")).style.display="none",o.style.position="absolute",o.method="POST",o.enctype="application/x-www-form-urlencoded",o.acceptCharset="UTF-8",(r=s.document.createElement("textarea")).name="d",o.appendChild(r),s.document.body.appendChild(o));var d="a"+i.string(8);o.target=d,o.action=t.addQuery(t.addPath(a,"/jsonp_send"),"i="+d);var m=function(h){try{return s.document.createElement('<iframe name="'+h+'">')}catch{var S=s.document.createElement("iframe");return S.name=h,S}}(d);m.id=d,m.style.display="none",o.appendChild(m);try{r.value=c}catch{}o.submit();function f(h){m.onerror&&(m.onreadystatechange=m.onerror=m.onload=null,setTimeout(function(){m.parentNode.removeChild(m),m=null},500),r.value="",l(h))}return m.onerror=function(){f()},m.onload=function(){f()},m.onreadystatechange=function(h){e("onreadystatechange",d,m.readyState),m.readyState==="complete"&&f()},function(){f(new Error("Aborted"))}}}).call(this)}).call(this,typeof A!="undefined"?A:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../../utils/random":50,"../../utils/url":52,debug:void 0}],34:[function(n,u,x){(function(s){(function(){var o=n("events").EventEmitter,r=n("inherits"),i=n("../../utils/event"),t=n("../../utils/browser"),e=n("../../utils/url"),a=function(){};function c(l,d,m){var f=this;o.call(this),setTimeout(function(){f._start(l,d,m)},0)}r(c,o),c.prototype._start=function(l,d,m){var f=this,h=new s.XDomainRequest;d=e.addQuery(d,"t="+ +new Date),h.onerror=function(){f._error()},h.ontimeout=function(){f._error()},h.onprogress=function(){a("progress",h.responseText),f.emit("chunk",200,h.responseText)},h.onload=function(){f.emit("finish",200,h.responseText),f._cleanup(!1)},this.xdr=h,this.unloadRef=i.unloadAdd(function(){f._cleanup(!0)});try{this.xdr.open(l,d),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(m)}catch{this._error()}},c.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},c.prototype._cleanup=function(l){if(this.xdr){if(this.removeAllListeners(),i.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,l)try{this.xdr.abort()}catch{}this.unloadRef=this.xdr=null}},c.prototype.close=function(){this._cleanup(!0)},c.enabled=!(!s.XDomainRequest||!t.hasDomain()),u.exports=c}).call(this)}).call(this,typeof A!="undefined"?A:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../../utils/browser":44,"../../utils/event":46,"../../utils/url":52,debug:void 0,events:3,inherits:54}],35:[function(n,u,x){var s=n("inherits"),o=n("../driver/xhr");function r(i,t,e,a){o.call(this,i,t,e,a)}s(r,o),r.enabled=o.enabled&&o.supportsCORS,u.exports=r},{"../driver/xhr":17,inherits:54}],36:[function(n,u,x){var s=n("events").EventEmitter;function o(){var r=this;s.call(this),this.to=setTimeout(function(){r.emit("finish",200,"{}")},o.timeout)}n("inherits")(o,s),o.prototype.close=function(){clearTimeout(this.to)},o.timeout=2e3,u.exports=o},{events:3,inherits:54}],37:[function(n,u,x){var s=n("inherits"),o=n("../driver/xhr");function r(i,t,e){o.call(this,i,t,e,{noCredentials:!0})}s(r,o),r.enabled=o.enabled,u.exports=r},{"../driver/xhr":17,inherits:54}],38:[function(n,u,x){var s=n("../utils/event"),o=n("../utils/url"),r=n("inherits"),i=n("events").EventEmitter,t=n("./driver/websocket"),e=function(){};function a(c,l,d){if(!a.enabled())throw new Error("Transport created when disabled");i.call(this);var m=this,f=o.addPath(c,"/websocket");f=f.slice(0,5)==="https"?"wss"+f.slice(5):"ws"+f.slice(4),this.url=f,this.ws=new t(this.url,[],d),this.ws.onmessage=function(h){e("message event",h.data),m.emit("message",h.data)},this.unloadRef=s.unloadAdd(function(){m.ws.close()}),this.ws.onclose=function(h){e("close event",h.code,h.reason),m.emit("close",h.code,h.reason),m._cleanup()},this.ws.onerror=function(h){m.emit("close",1006,"WebSocket connection broken"),m._cleanup()}}r(a,i),a.prototype.send=function(c){var l="["+c+"]";this.ws.send(l)},a.prototype.close=function(){var c=this.ws;this._cleanup(),c&&c.close()},a.prototype._cleanup=function(){var c=this.ws;c&&(c.onmessage=c.onclose=c.onerror=null),s.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},a.enabled=function(){return!!t},a.transportName="websocket",a.roundTrips=2,u.exports=a},{"../utils/event":46,"../utils/url":52,"./driver/websocket":19,debug:void 0,events:3,inherits:54}],39:[function(n,u,x){var s=n("inherits"),o=n("./lib/ajax-based"),r=n("./xdr-streaming"),i=n("./receiver/xhr"),t=n("./sender/xdr");function e(a){if(!t.enabled)throw new Error("Transport created when disabled");o.call(this,a,"/xhr",i,t)}s(e,o),e.enabled=r.enabled,e.transportName="xdr-polling",e.roundTrips=2,u.exports=e},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,"./xdr-streaming":40,inherits:54}],40:[function(n,u,x){var s=n("inherits"),o=n("./lib/ajax-based"),r=n("./receiver/xhr"),i=n("./sender/xdr");function t(e){if(!i.enabled)throw new Error("Transport created when disabled");o.call(this,e,"/xhr_streaming",r,i)}s(t,o),t.enabled=function(e){return!e.cookie_needed&&!e.nullOrigin&&i.enabled&&e.sameScheme},t.transportName="xdr-streaming",t.roundTrips=2,u.exports=t},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,inherits:54}],41:[function(n,u,x){var s=n("inherits"),o=n("./lib/ajax-based"),r=n("./receiver/xhr"),i=n("./sender/xhr-cors"),t=n("./sender/xhr-local");function e(a){if(!t.enabled&&!i.enabled)throw new Error("Transport created when disabled");o.call(this,a,"/xhr",r,i)}s(e,o),e.enabled=function(a){return!a.nullOrigin&&(!(!t.enabled||!a.sameOrigin)||i.enabled)},e.transportName="xhr-polling",e.roundTrips=2,u.exports=e},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,inherits:54}],42:[function(n,u,x){(function(s){(function(){var o=n("inherits"),r=n("./lib/ajax-based"),i=n("./receiver/xhr"),t=n("./sender/xhr-cors"),e=n("./sender/xhr-local"),a=n("../utils/browser");function c(l){if(!e.enabled&&!t.enabled)throw new Error("Transport created when disabled");r.call(this,l,"/xhr_streaming",i,t)}o(c,r),c.enabled=function(l){return!l.nullOrigin&&!a.isOpera()&&t.enabled},c.transportName="xhr-streaming",c.roundTrips=2,c.needBody=!!s.document,u.exports=c}).call(this)}).call(this,typeof A!="undefined"?A:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../utils/browser":44,"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,inherits:54}],43:[function(n,u,x){(function(s){(function(){s.crypto&&s.crypto.getRandomValues?u.exports.randomBytes=function(o){var r=new Uint8Array(o);return s.crypto.getRandomValues(r),r}:u.exports.randomBytes=function(o){for(var r=new Array(o),i=0;i<o;i++)r[i]=Math.floor(256*Math.random());return r}}).call(this)}).call(this,typeof A!="undefined"?A:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],44:[function(n,u,x){(function(s){(function(){u.exports={isOpera:function(){return s.navigator&&/opera/i.test(s.navigator.userAgent)},isKonqueror:function(){return s.navigator&&/konqueror/i.test(s.navigator.userAgent)},hasDomain:function(){if(!s.document)return!0;try{return!!s.document.domain}catch{return!1}}}}).call(this)}).call(this,typeof A!="undefined"?A:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],45:[function(n,u,x){var s,o=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g;u.exports={quote:function(r){var i=JSON.stringify(r);return o.lastIndex=0,o.test(i)?(s=s||function(t){var e,a={},c=[];for(e=0;e<65536;e++)c.push(String.fromCharCode(e));return t.lastIndex=0,c.join("").replace(t,function(l){return a[l]="\\u"+("0000"+l.charCodeAt(0).toString(16)).slice(-4),""}),t.lastIndex=0,a}(o),i.replace(o,function(t){return s[t]})):i}}},{}],46:[function(n,u,x){(function(s){(function(){var o=n("./random"),r={},i=!1,t=s.chrome&&s.chrome.app&&s.chrome.app.runtime;u.exports={attachEvent:function(e,a){s.addEventListener!==void 0?s.addEventListener(e,a,!1):s.document&&s.attachEvent&&(s.document.attachEvent("on"+e,a),s.attachEvent("on"+e,a))},detachEvent:function(e,a){s.addEventListener!==void 0?s.removeEventListener(e,a,!1):s.document&&s.detachEvent&&(s.document.detachEvent("on"+e,a),s.detachEvent("on"+e,a))},unloadAdd:function(e){if(t)return null;var a=o.string(8);return r[a]=e,i&&setTimeout(this.triggerUnloadCallbacks,0),a},unloadDel:function(e){e in r&&delete r[e]},triggerUnloadCallbacks:function(){for(var e in r)r[e](),delete r[e]}},t||u.exports.attachEvent("unload",function(){i||(i=!0,u.exports.triggerUnloadCallbacks())})}).call(this)}).call(this,typeof A!="undefined"?A:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./random":50}],47:[function(n,u,x){(function(s){(function(){var o=n("./event"),r=n("./browser"),i=function(){};u.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){u.exports.WPrefix in s||(s[u.exports.WPrefix]={})},postMessage:function(t,e){s.parent!==s?s.parent.postMessage(JSON.stringify({windowId:u.exports.currentWindowId,type:t,data:e||""}),"*"):i()},createIframe:function(t,e){function a(){clearTimeout(d);try{f.onload=null}catch{}f.onerror=null}function c(){f&&(a(),setTimeout(function(){f&&f.parentNode.removeChild(f),f=null},0),o.unloadDel(m))}function l(h){f&&(c(),e(h))}var d,m,f=s.document.createElement("iframe");return f.src=t,f.style.display="none",f.style.position="absolute",f.onerror=function(){l("onerror")},f.onload=function(){clearTimeout(d),d=setTimeout(function(){l("onload timeout")},2e3)},s.document.body.appendChild(f),d=setTimeout(function(){l("timeout")},15e3),m=o.unloadAdd(c),{post:function(h,S){setTimeout(function(){try{f&&f.contentWindow&&f.contentWindow.postMessage(h,S)}catch{}},0)},cleanup:c,loaded:a}},createHtmlfile:function(t,e){function a(){clearTimeout(d),f.onerror=null}function c(){S&&(a(),o.unloadDel(m),f.parentNode.removeChild(f),f=S=null,CollectGarbage())}function l(N){S&&(c(),e(N))}var d,m,f,h=["Active"].concat("Object").join("X"),S=new s[h]("htmlfile");S.open(),S.write('<html><script>document.domain="'+s.document.domain+'";<\/script></html>'),S.close(),S.parentWindow[u.exports.WPrefix]=s[u.exports.WPrefix];var E=S.createElement("div");return S.body.appendChild(E),f=S.createElement("iframe"),E.appendChild(f),f.src=t,f.onerror=function(){l("onerror")},d=setTimeout(function(){l("timeout")},15e3),m=o.unloadAdd(c),{post:function(N,y){try{setTimeout(function(){f&&f.contentWindow&&f.contentWindow.postMessage(N,y)},0)}catch{}},cleanup:c,loaded:a}}},u.exports.iframeEnabled=!1,s.document&&(u.exports.iframeEnabled=(typeof s.postMessage=="function"||typeof s.postMessage=="object")&&!r.isKonqueror())}).call(this)}).call(this,typeof A!="undefined"?A:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./browser":44,"./event":46,debug:void 0}],48:[function(n,u,x){(function(s){(function(){var o={};["log","debug","warn"].forEach(function(r){var i;try{i=s.console&&s.console[r]&&s.console[r].apply}catch{}o[r]=i?function(){return s.console[r].apply(s.console,arguments)}:r==="log"?function(){}:o.log}),u.exports=o}).call(this)}).call(this,typeof A!="undefined"?A:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],49:[function(n,u,x){u.exports={isObject:function(s){var o=typeof s;return o=="function"||o=="object"&&!!s},extend:function(s){if(!this.isObject(s))return s;for(var o,r,i=1,t=arguments.length;i<t;i++)for(r in o=arguments[i])Object.prototype.hasOwnProperty.call(o,r)&&(s[r]=o[r]);return s}}},{}],50:[function(n,u,x){var s=n("crypto"),o="abcdefghijklmnopqrstuvwxyz012345";u.exports={string:function(r){for(var i=o.length,t=s.randomBytes(r),e=[],a=0;a<r;a++)e.push(o.substr(t[a]%i,1));return e.join("")},number:function(r){return Math.floor(Math.random()*r)},numberString:function(r){var i=(""+(r-1)).length;return(new Array(i+1).join("0")+this.number(r)).slice(-i)}}},{crypto:43}],51:[function(n,u,x){var s=function(){};u.exports=function(o){return{filterToEnabled:function(r,i){var t={main:[],facade:[]};return r?typeof r=="string"&&(r=[r]):r=[],o.forEach(function(e){e&&(e.transportName!=="websocket"||i.websocket!==!1?r.length&&r.indexOf(e.transportName)===-1?s("not in whitelist",e.transportName):e.enabled(i)?(s("enabled",e.transportName),t.main.push(e),e.facadeTransport&&t.facade.push(e.facadeTransport)):s("disabled",e.transportName):s())}),t}}}},{debug:void 0}],52:[function(n,u,x){var s=n("url-parse");u.exports={getOrigin:function(o){if(!o)return null;var r=new s(o);if(r.protocol==="file:")return null;var i=r.port;return i=i||(r.protocol==="https:"?"443":"80"),r.protocol+"//"+r.hostname+":"+i},isOriginEqual:function(o,r){var i=this.getOrigin(o)===this.getOrigin(r);return i},isSchemeEqual:function(o,r){return o.split(":")[0]===r.split(":")[0]},addPath:function(o,r){var i=o.split("?");return i[0]+r+(i[1]?"?"+i[1]:"")},addQuery:function(o,r){return o+(o.indexOf("?")===-1?"?"+r:"&"+r)},isLoopbackAddr:function(o){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(o)||/^\[::1\]$/.test(o)}}},{debug:void 0,"url-parse":57}],53:[function(n,u,x){u.exports="1.6.1"},{}],54:[function(n,u,x){typeof Object.create=="function"?u.exports=function(s,o){o&&(s.super_=o,s.prototype=Object.create(o.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}))}:u.exports=function(s,o){if(o){let r=function(){};s.super_=o,r.prototype=o.prototype,s.prototype=new r,s.prototype.constructor=s}}},{}],55:[function(n,u,x){var s=Object.prototype.hasOwnProperty;function o(r){try{return decodeURIComponent(r.replace(/\+/g," "))}catch{return null}}x.stringify=function(r,i){i=i||"";var t,e,a=[];for(e in typeof i!="string"&&(i="?"),r)if(s.call(r,e)){if((t=r[e])||t!=null&&!isNaN(t)||(t=""),e=encodeURIComponent(e),t=encodeURIComponent(t),e===null||t===null)continue;a.push(e+"="+t)}return a.length?i+a.join("&"):""},x.parse=function(r){for(var i,t=/([^=?&]+)=?([^&]*)/g,e={};i=t.exec(r);){var a=o(i[1]),c=o(i[2]);a===null||c===null||a in e||(e[a]=c)}return e}},{}],56:[function(n,u,x){u.exports=function(s,o){if(o=o.split(":")[0],!(s=+s))return!1;switch(o){case"http":case"ws":return s!==80;case"https":case"wss":return s!==443;case"ftp":return s!==21;case"gopher":return s!==70;case"file":return!1}return s!==0}},{}],57:[function(n,u,x){(function(s){(function(){var o=n("requires-port"),r=n("querystringify"),i=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,t=/[\n\r\t]/g,e=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,a=/:\d+$/,c=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,l=/^[a-zA-Z]:/;function d(y){return(y||"").toString().replace(i,"")}var m=[["#","hash"],["?","query"],function(y,v){return S(v.protocol)?y.replace(/\\/g,"/"):y},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],f={hash:1,query:1};function h(y){var v,_=(typeof window!="undefined"?window:s!==void 0?s:typeof self!="undefined"?self:{}).location||{},p={},I=typeof(y=y||_);if(y.protocol==="blob:")p=new N(unescape(y.pathname),{});else if(I=="string")for(v in p=new N(y,{}),f)delete p[v];else if(I=="object"){for(v in y)v in f||(p[v]=y[v]);p.slashes===void 0&&(p.slashes=e.test(y.href))}return p}function S(y){return y==="file:"||y==="ftp:"||y==="http:"||y==="https:"||y==="ws:"||y==="wss:"}function E(y,v){y=(y=d(y)).replace(t,""),v=v||{};var _,p=c.exec(y),I=p[1]?p[1].toLowerCase():"",b=!!p[2],C=!!p[3],g=0;return b?g=C?(_=p[2]+p[3]+p[4],p[2].length+p[3].length):(_=p[2]+p[4],p[2].length):C?(_=p[3]+p[4],g=p[3].length):_=p[4],I==="file:"?2<=g&&(_=_.slice(2)):S(I)?_=p[4]:I?b&&(_=_.slice(2)):2<=g&&S(v.protocol)&&(_=p[4]),{protocol:I,slashes:b||S(I),slashesCount:g,rest:_}}function N(y,v,_){if(y=(y=d(y)).replace(t,""),!(this instanceof N))return new N(y,v,_);var p,I,b,C,g,k,T=m.slice(),L=typeof v,w=this,P=0;for(L!="object"&&L!="string"&&(_=v,v=null),_&&typeof _!="function"&&(_=r.parse),p=!(I=E(y||"",v=h(v))).protocol&&!I.slashes,w.slashes=I.slashes||p&&v.slashes,w.protocol=I.protocol||v.protocol||"",y=I.rest,(I.protocol==="file:"&&(I.slashesCount!==2||l.test(y))||!I.slashes&&(I.protocol||I.slashesCount<2||!S(w.protocol)))&&(T[3]=[/(.*)/,"pathname"]);P<T.length;P++)typeof(C=T[P])!="function"?(b=C[0],k=C[1],b!=b?w[k]=y:typeof b=="string"?~(g=b==="@"?y.lastIndexOf(b):y.indexOf(b))&&(y=typeof C[2]=="number"?(w[k]=y.slice(0,g),y.slice(g+C[2])):(w[k]=y.slice(g),y.slice(0,g))):(g=b.exec(y))&&(w[k]=g[1],y=y.slice(0,g.index)),w[k]=w[k]||p&&C[3]&&v[k]||"",C[4]&&(w[k]=w[k].toLowerCase())):y=C(y,w);_&&(w.query=_(w.query)),p&&v.slashes&&w.pathname.charAt(0)!=="/"&&(w.pathname!==""||v.pathname!=="")&&(w.pathname=function(R,M){if(R==="")return M;for(var W=(M||"/").split("/").slice(0,-1).concat(R.split("/")),U=W.length,q=W[U-1],Z=!1,z=0;U--;)W[U]==="."?W.splice(U,1):W[U]===".."?(W.splice(U,1),z++):z&&(U===0&&(Z=!0),W.splice(U,1),z--);return Z&&W.unshift(""),q!=="."&&q!==".."||W.push(""),W.join("/")}(w.pathname,v.pathname)),w.pathname.charAt(0)!=="/"&&S(w.protocol)&&(w.pathname="/"+w.pathname),o(w.port,w.protocol)||(w.host=w.hostname,w.port=""),w.username=w.password="",w.auth&&(~(g=w.auth.indexOf(":"))?(w.username=w.auth.slice(0,g),w.username=encodeURIComponent(decodeURIComponent(w.username)),w.password=w.auth.slice(g+1),w.password=encodeURIComponent(decodeURIComponent(w.password))):w.username=encodeURIComponent(decodeURIComponent(w.auth)),w.auth=w.password?w.username+":"+w.password:w.username),w.origin=w.protocol!=="file:"&&S(w.protocol)&&w.host?w.protocol+"//"+w.host:"null",w.href=w.toString()}N.prototype={set:function(y,v,_){var p=this;switch(y){case"query":typeof v=="string"&&v.length&&(v=(_||r.parse)(v)),p[y]=v;break;case"port":p[y]=v,o(v,p.protocol)?v&&(p.host=p.hostname+":"+v):(p.host=p.hostname,p[y]="");break;case"hostname":p[y]=v,p.port&&(v+=":"+p.port),p.host=v;break;case"host":p[y]=v,a.test(v)?(v=v.split(":"),p.port=v.pop(),p.hostname=v.join(":")):(p.hostname=v,p.port="");break;case"protocol":p.protocol=v.toLowerCase(),p.slashes=!_;break;case"pathname":case"hash":if(v){var I=y==="pathname"?"/":"#";p[y]=v.charAt(0)!==I?I+v:v}else p[y]=v;break;case"username":case"password":p[y]=encodeURIComponent(v);break;case"auth":var b=v.indexOf(":");~b?(p.username=v.slice(0,b),p.username=encodeURIComponent(decodeURIComponent(p.username)),p.password=v.slice(b+1),p.password=encodeURIComponent(decodeURIComponent(p.password))):p.username=encodeURIComponent(decodeURIComponent(v))}for(var C=0;C<m.length;C++){var g=m[C];g[4]&&(p[g[1]]=p[g[1]].toLowerCase())}return p.auth=p.password?p.username+":"+p.password:p.username,p.origin=p.protocol!=="file:"&&S(p.protocol)&&p.host?p.protocol+"//"+p.host:"null",p.href=p.toString(),p},toString:function(y){y&&typeof y=="function"||(y=r.stringify);var v,_=this,p=_.host,I=_.protocol;I&&I.charAt(I.length-1)!==":"&&(I+=":");var b=I+(_.protocol&&_.slashes||S(_.protocol)?"//":"");return _.username?(b+=_.username,_.password&&(b+=":"+_.password),b+="@"):_.password?(b+=":"+_.password,b+="@"):_.protocol!=="file:"&&S(_.protocol)&&!p&&_.pathname!=="/"&&(b+="@"),(p[p.length-1]===":"||a.test(_.hostname)&&!_.port)&&(p+=":"),b+=p+_.pathname,(v=typeof _.query=="object"?y(_.query):_.query)&&(b+=v.charAt(0)!=="?"?"?"+v:v),_.hash&&(b+=_.hash),b}},N.extractProtocol=E,N.location=h,N.trimLeft=d,N.qs=r,u.exports=N}).call(this)}).call(this,typeof A!="undefined"?A:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{querystringify:55,"requires-port":56}]},{},[1])(1)})})(ee);var le=ee.exports,J={exports:{}},K={};(function(O){(function(){var j,n,u,x,s={}.hasOwnProperty,o=[].slice;j={LF:`
`,NULL:"\0"},u=function(){var r;function i(t,e,a){this.command=t,this.headers=e!=null?e:{},this.body=a!=null?a:""}return i.prototype.toString=function(){var t,e,a,c,l;t=[this.command],a=this.headers["content-length"]===!1,a&&delete this.headers["content-length"],l=this.headers;for(e in l)!s.call(l,e)||(c=l[e],t.push(""+e+":"+c));return this.body&&!a&&t.push("content-length:"+i.sizeOfUTF8(this.body)),t.push(j.LF+this.body),t.join(j.LF)},i.sizeOfUTF8=function(t){return t?encodeURI(t).match(/%..|./g).length:0},r=function(t){var e,a,c,l,d,m,f,h,S,E,N,y,v,_,p,I,b;for(l=t.search(RegExp(""+j.LF+j.LF)),d=t.substring(0,l).split(j.LF),c=d.shift(),m={},y=function(C){return C.replace(/^\s+|\s+$/g,"")},I=d.reverse(),v=0,p=I.length;v<p;v++)E=I[v],h=E.indexOf(":"),m[y(E.substring(0,h))]=y(E.substring(h+1));if(e="",N=l+2,m["content-length"])S=parseInt(m["content-length"]),e=(""+t).substring(N,N+S);else for(a=null,f=_=N,b=t.length;(N<=b?_<b:_>b)&&(a=t.charAt(f),a!==j.NULL);f=N<=b?++_:--_)e+=a;return new i(c,m,e)},i.unmarshall=function(t){var e;return function(){var a,c,l,d;for(l=t.split(RegExp(""+j.NULL+j.LF+"*")),d=[],a=0,c=l.length;a<c;a++)e=l[a],(e!=null?e.length:void 0)>0&&d.push(r(e));return d}()},i.marshall=function(t,e,a){var c;return c=new i(t,e,a),c.toString()+j.NULL},i}(),n=function(){var r;function i(t){this.ws=t,this.ws.binaryType="arraybuffer",this.counter=0,this.connected=!1,this.heartbeat={outgoing:1e4,incoming:1e4},this.maxWebSocketFrameSize=16*1024,this.subscriptions={}}return i.prototype.debug=function(t){var e;return typeof window!="undefined"&&window!==null&&(e=window.console)!=null?e.log(t):void 0},r=function(){return Date.now?Date.now():new Date().valueOf},i.prototype._transmit=function(t,e,a){var c;for(c=u.marshall(t,e,a),typeof this.debug=="function"&&this.debug(">>> "+c);;)if(c.length>this.maxWebSocketFrameSize)this.ws.send(c.substring(0,this.maxWebSocketFrameSize)),c=c.substring(this.maxWebSocketFrameSize),typeof this.debug=="function"&&this.debug("remaining = "+c.length);else return this.ws.send(c)},i.prototype._setupHeartbeat=function(t){var e,a,c,l,d,m;if(!((d=t.version)!==x.VERSIONS.V1_1&&d!==x.VERSIONS.V1_2)&&(m=function(){var f,h,S,E;for(S=t["heart-beat"].split(","),E=[],f=0,h=S.length;f<h;f++)l=S[f],E.push(parseInt(l));return E}(),a=m[0],e=m[1],this.heartbeat.outgoing===0||e===0||(c=Math.max(this.heartbeat.outgoing,e),typeof this.debug=="function"&&this.debug("send PING every "+c+"ms"),this.pinger=x.setInterval(c,function(f){return function(){return f.ws.send(j.LF),typeof f.debug=="function"?f.debug(">>> PING"):void 0}}(this))),!(this.heartbeat.incoming===0||a===0)))return c=Math.max(this.heartbeat.incoming,a),typeof this.debug=="function"&&this.debug("check PONG every "+c+"ms"),this.ponger=x.setInterval(c,function(f){return function(){var h;if(h=r()-f.serverActivity,h>c*2)return typeof f.debug=="function"&&f.debug("did not receive server activity for the last "+h+"ms"),f.ws.close()}}(this))},i.prototype._parseConnect=function(){var t,e,a,c;switch(t=1<=arguments.length?o.call(arguments,0):[],c={},t.length){case 2:c=t[0],e=t[1];break;case 3:t[1]instanceof Function?(c=t[0],e=t[1],a=t[2]):(c.login=t[0],c.passcode=t[1],e=t[2]);break;case 4:c.login=t[0],c.passcode=t[1],e=t[2],a=t[3];break;default:c.login=t[0],c.passcode=t[1],e=t[2],a=t[3],c.host=t[4]}return[c,e,a]},i.prototype.connect=function(){var t,e,a,c;return t=1<=arguments.length?o.call(arguments,0):[],c=this._parseConnect.apply(this,t),a=c[0],this.connectCallback=c[1],e=c[2],typeof this.debug=="function"&&this.debug("Opening Web Socket..."),this.ws.onmessage=function(l){return function(d){var m,f,h,S,E,N,y,v,_,p,I,b;if(S=typeof ArrayBuffer!="undefined"&&d.data instanceof ArrayBuffer?(m=new Uint8Array(d.data),typeof l.debug=="function"&&l.debug("--- got data length: "+m.length),function(){var C,g,k;for(k=[],C=0,g=m.length;C<g;C++)f=m[C],k.push(String.fromCharCode(f));return k}().join("")):d.data,l.serverActivity=r(),S===j.LF){typeof l.debug=="function"&&l.debug("<<< PONG");return}for(typeof l.debug=="function"&&l.debug("<<< "+S),I=u.unmarshall(S),b=[],_=0,p=I.length;_<p;_++)switch(E=I[_],E.command){case"CONNECTED":typeof l.debug=="function"&&l.debug("connected to server "+E.headers.server),l.connected=!0,l._setupHeartbeat(E.headers),b.push(typeof l.connectCallback=="function"?l.connectCallback(E):void 0);break;case"MESSAGE":v=E.headers.subscription,y=l.subscriptions[v]||l.onreceive,y?(h=l,N=E.headers["message-id"],E.ack=function(C){return C==null&&(C={}),h.ack(N,v,C)},E.nack=function(C){return C==null&&(C={}),h.nack(N,v,C)},b.push(y(E))):b.push(typeof l.debug=="function"?l.debug("Unhandled received MESSAGE: "+E):void 0);break;case"RECEIPT":b.push(typeof l.onreceipt=="function"?l.onreceipt(E):void 0);break;case"ERROR":b.push(typeof e=="function"?e(E):void 0);break;default:b.push(typeof l.debug=="function"?l.debug("Unhandled frame: "+E):void 0)}return b}}(this),this.ws.onclose=function(l){return function(){var d;return d="Whoops! Lost connection to "+l.ws.url,typeof l.debug=="function"&&l.debug(d),l._cleanUp(),typeof e=="function"?e(d):void 0}}(this),this.ws.onopen=function(l){return function(){return typeof l.debug=="function"&&l.debug("Web Socket Opened..."),a["accept-version"]=x.VERSIONS.supportedVersions(),a["heart-beat"]=[l.heartbeat.outgoing,l.heartbeat.incoming].join(","),l._transmit("CONNECT",a)}}(this)},i.prototype.disconnect=function(t,e){return e==null&&(e={}),this._transmit("DISCONNECT",e),this.ws.onclose=null,this.ws.close(),this._cleanUp(),typeof t=="function"?t():void 0},i.prototype._cleanUp=function(){if(this.connected=!1,this.pinger&&x.clearInterval(this.pinger),this.ponger)return x.clearInterval(this.ponger)},i.prototype.send=function(t,e,a){return e==null&&(e={}),a==null&&(a=""),e.destination=t,this._transmit("SEND",e,a)},i.prototype.subscribe=function(t,e,a){var c;return a==null&&(a={}),a.id||(a.id="sub-"+this.counter++),a.destination=t,this.subscriptions[a.id]=e,this._transmit("SUBSCRIBE",a),c=this,{id:a.id,unsubscribe:function(){return c.unsubscribe(a.id)}}},i.prototype.unsubscribe=function(t){return delete this.subscriptions[t],this._transmit("UNSUBSCRIBE",{id:t})},i.prototype.begin=function(t){var e,a;return a=t||"tx-"+this.counter++,this._transmit("BEGIN",{transaction:a}),e=this,{id:a,commit:function(){return e.commit(a)},abort:function(){return e.abort(a)}}},i.prototype.commit=function(t){return this._transmit("COMMIT",{transaction:t})},i.prototype.abort=function(t){return this._transmit("ABORT",{transaction:t})},i.prototype.ack=function(t,e,a){return a==null&&(a={}),a["message-id"]=t,a.subscription=e,this._transmit("ACK",a)},i.prototype.nack=function(t,e,a){return a==null&&(a={}),a["message-id"]=t,a.subscription=e,this._transmit("NACK",a)},i}(),x={VERSIONS:{V1_0:"1.0",V1_1:"1.1",V1_2:"1.2",supportedVersions:function(){return"1.1,1.0"}},client:function(r,i){var t,e;return i==null&&(i=["v10.stomp","v11.stomp"]),t=x.WebSocketClass||WebSocket,e=new t(r,i),new n(e)},over:function(r){return new n(r)},Frame:u},O!==null&&(O.Stomp=x),typeof window!="undefined"&&window!==null?(x.setInterval=function(r,i){return window.setInterval(i,r)},x.clearInterval=function(r){return window.clearInterval(r)},window.Stomp=x):O||(self.Stomp=x)}).call(A)})(K);var H={},ue={},fe=Object.freeze(Object.defineProperty({__proto__:null,default:ue},Symbol.toStringTag,{value:"Module"})),de=oe(fe);const pe="websocket@latest",he="websocket@1.0.34",me=!1,ve="sha512-PRDso2sGwF6kM75QykIesBijKSVceR6jL2G8NGYyq2XrItNC2P5/qL5XeR056GhA+Ly7JMFvJb9I312mJfmqnQ==",be="/websocket",ge={},ye={type:"tag",registry:!0,raw:"websocket@latest",name:"websocket",escapedName:"websocket",rawSpec:"latest",saveSpec:null,fetchSpec:"latest"},we=["/stompjs"],xe="https://registry.npmjs.org/websocket/-/websocket-1.0.34.tgz",_e="2bdc2602c08bf2c82253b730655c0ef7dcab3111",Se="websocket@latest",Ee="C:\\Users\\ben31\\Desktop\\vscode_workplace\\javascript\\vue\\myFileServer\\node_modules\\stompjs",ke={name:"Brian McKelvey",email:"theturtle32@gmail.com",url:"https://github.com/theturtle32"},Ce="lib/browser.js",Oe={url:"https://github.com/theturtle32/WebSocket-Node/issues"},Te=!1,Ne={verbose:!1},je=[{name:"I\xF1aki Baz Castillo",email:"ibc@aliax.net",url:"http://dev.sipdoc.net"}],Ie={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},Ae=!1,Le="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",Re={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4",jshint:"^2.0.0","jshint-stylish":"^2.2.1",tape:"^4.9.1"},Pe={lib:"./lib"},Me={node:">=4.0.0"},Ue="https://github.com/theturtle32/WebSocket-Node",We=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],qe="Apache-2.0",Be="index",De="websocket",$e={type:"git",url:"git+https://github.com/theturtle32/WebSocket-Node.git"},Fe={gulp:"gulp",test:"tape test/unit/*.js"},Ge="1.0.34";var Je={_from:pe,_id:he,_inBundle:me,_integrity:ve,_location:be,_phantomChildren:ge,_requested:ye,_requiredBy:we,_resolved:xe,_shasum:_e,_spec:Se,_where:Ee,author:ke,browser:Ce,bugs:Oe,bundleDependencies:Te,config:Ne,contributors:je,dependencies:Ie,deprecated:Ae,description:Le,devDependencies:Re,directories:Pe,engines:Me,homepage:Ue,keywords:We,license:qe,main:Be,name:De,repository:$e,scripts:Fe,version:Ge},ze=Je.version,D;if(typeof globalThis=="object")D=globalThis;else try{D=require("es5-ext/global")}catch{}finally{if(!D&&typeof window!="undefined"&&(D=window),!D)throw new Error("Could not determine global this")}var F=D.WebSocket||D.MozWebSocket,Ve=ze;function te(O,j){var n;return j?n=new F(O,j):n=new F(O),n}F&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(O){Object.defineProperty(te,O,{get:function(){return F[O]}})});var He={w3cwebsocket:F?te:null,version:Ve};(function(){var O,j,n,u,x,s;O=K,j=de,O.Stomp.setInterval=function(o,r){return setInterval(r,o)},O.Stomp.clearInterval=function(o){return clearInterval(o)},x=function(o,r){var i,t;return i=null,t={url:"tcp:// "+r+":"+o,send:function(e){return i.write(e)},close:function(){return i.end()}},i=j.connect(o,r,function(e){return t.onopen()}),i.on("error",function(e){return typeof t.onclose=="function"?t.onclose(e):void 0}),i.on("close",function(e){return typeof t.onclose=="function"?t.onclose(e):void 0}),i.on("data",function(e){var a;return a={data:e.toString()},t.onmessage(a)}),t},s=function(o){var r,i,t,e;return r=He.client,i=null,e={url:o,send:function(a){return i.sendUTF(a)},close:function(){return i.close()}},t=new r,t.on("connect",function(a){return i=a,e.onopen(),i.on("error",function(c){return typeof e.onclose=="function"?e.onclose(c):void 0}),i.on("close",function(){return typeof e.onclose=="function"?e.onclose():void 0}),i.on("message",function(c){var l;if(c.type==="utf8")return l={data:c.utf8Data},e.onmessage(l)})}),t.connect(o),e},n=function(o,r){var i;return i=x(r,o),O.Stomp.over(i)},u=function(o){var r;return r=s(o),O.Stomp.over(r)},H.overTCP=n,H.overWS=u}).call(A);var Xe=K,ne=H;J.exports=Xe.Stomp;J.exports.overTCP=ne.overTCP;J.exports.overWS=ne.overWS;var Qe=J.exports;const Ke=X("br",null,null,-1),Ze=["value"],Ye=X("br",null,null,-1),et=Q("Send"),tt=Q("Open"),nt=Q("Close"),ot={data(){return{websock:null,stompClient:null,isActive:!1,cMsg:"",messages:[]}},created(){this.websock=new le(window.location.origin+"/websocket"),this.getMessages(),this.initWebSocket()},destroyed(){this.websocketclose()},methods:{getMessages(){let O=this;O.$request.get(`/chatroom/getAllMessages?name=${O.$cookies.get("name")}`).then(j=>{console.log(j),j.data.forEach(u=>{O.messages.push(u)})}).catch(j=>{O.$message.error(j)})},initWebSocket(){let O=this;O.isActive||(O.isActive=!0,O.stompClient=Qe.over(O.websock),O.stompClient.connect({},function(j){O.$message.success("Websocket Connected"),O.stompClient.subscribe("/chat",function(n){console.log(n);let u=JSON.parse(n.body);console.log(u),O.messages.push(JSON.parse(n.body)),O.$nextTick(()=>{O.$refs.mytable.scrollTo(0,400)})},{id:O.$cookies.get("name")+"-client"}),O.stompClient.subscribe("/chat/delete",function(n){let u=JSON.parse(n.body);O.messages.splice(u.id,1),O.$nextTick(()=>{O.$refs.mytable.scrollTo(0,400)})},{id:O.$cookies.get("name")+"-client-delete"})},j=>{console.log(j)})),console.log(O.websock)},sendMessage(){let O=this;O.cMsg&&O.cMsg!=""?this.stompClient.send("/chat",{},JSON.stringify({id:O.messages.length,name:O.$cookies.get("name"),message:O.cMsg})):this.$message.error("Message must not be empty")},deleteMessage(O,j){console.log(O),console.log(j);let n=this;n.messages[O].name==n.$cookies.get("name")?n.stompClient.send("/chat/delete",{},JSON.stringify({id:O,name:n.$cookies.get("name"),message:j.message})):n.$message.error("You cannot delete others' messages")},websocketclose(){console.log("websocket close connection"),this.isActive&&(this.stompClient.disconnect(),this.isActive=!1,this.$message.success("Close Websocket"))}},computed:{isMobile(){let O=!1;return function(j){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(j)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(j.substr(0,4)))&&(O=!0)}(navigator.userAgent||navigator.vendor||window.opera),O},operationWidth(){return this.isMobile?100:150}}},it=Object.assign(ot,{__name:"Chatroom",setup(O){return(j,n)=>{const u=V("el-table-column"),x=V("el-button"),s=V("el-table");return re(),ie(se,null,[B(s,{ref:"mytable",data:j.messages,"max-height":"400"},{default:$(()=>[B(u,{type:"index"}),B(u,{prop:"name",label:"Name"}),B(u,{prop:"message",label:"Message"}),B(u,{label:"Operations",fixed:"right",width:"operationWidth"},{default:$(o=>[B(x,{type:"danger",onClick:Y(r=>j.deleteMessage(o.$index,o.row),["stop","prevent"]),icon:ae(ce),circle:""},null,8,["onClick","icon"])]),_:1})]),_:1},8,["data"]),Ke,X("textarea",{value:j.cMsg,placeholder:"Please input message",rows:"4",cols:"70",onInput:n[0]||(n[0]=o=>j.cMsg=o.target.value)},null,40,Ze),Ye,B(x,{type:"primary",style:{"margin-top":"1%","margin-bottom":"3%"},onClick:n[1]||(n[1]=Y(o=>j.sendMessage(),["stop","prevent"]))},{default:$(()=>[et]),_:1}),B(x,{disabled:j.isActive,type:"primary",style:{"margin-top":"1%","margin-bottom":"3%"},onClick:n[2]||(n[2]=o=>j.initWebSocket())},{default:$(()=>[tt]),_:1},8,["disabled"]),B(x,{disabled:!j.isActive,type:"primary",style:{"margin-top":"1%","margin-bottom":"3%"},onClick:n[3]||(n[3]=o=>j.websocketclose())},{default:$(()=>[nt]),_:1},8,["disabled"])],64)}}});export{it as default};
