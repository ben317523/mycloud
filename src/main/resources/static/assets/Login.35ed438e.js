import{l as f}from"./index.e3edb5c8.js";import{_ as g,r as s,o as b,c as w,w as a,a as t,b as k,d as _,p as y,e as h,f as v}from"./index.a024d9c0.js";const V={data(){return{form:{name:"",password:""}}},methods:{onSubmit(){var e=this;if(e.form.name==""||e.form.password==""){e.$message.warning("Name and password must not be empty!");return}e.$request.post("/login",f.stringify(e.form),{timeout:3e3}).then(o=>{o.data.code==0?(localStorage.setItem("token",o.data.data.token),e.$message.success(o.data.msg),e.$cookies.set("token",o.data.data.token),e.$cookies.set("name",e.form.name),e.$router.replace("/")):e.$message.error(o.data.msg)}).catch(o=>{e.$message.error(o.message+"  "+o.code)})}}},x=e=>(y("data-v-3b6e228d"),e=e(),h(),e),S=x(()=>v("h1",{style:{color:"blue"}},"Login",-1)),$=_("Login"),I=_("Register");function L(e,o,N,B,n,l){const m=s("el-input"),d=s("el-form-item"),p=s("el-form"),i=s("el-button"),c=s("router-link"),u=s("el-container");return b(),w(u,{class:"form-container"},{default:a(()=>[S,t(p,{model:n.form,"label-width":"120px","label-position":"top",onKeyup:k(l.onSubmit,["enter"])},{default:a(()=>[t(d,{label:"Username"},{default:a(()=>[t(m,{modelValue:n.form.name,"onUpdate:modelValue":o[0]||(o[0]=r=>n.form.name=r),clearable:""},null,8,["modelValue"])]),_:1}),t(d,{label:"Password"},{default:a(()=>[t(m,{modelValue:n.form.password,"onUpdate:modelValue":o[1]||(o[1]=r=>n.form.password=r),"show-password":"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","onKeyup"]),t(i,{type:"primary",style:{"margin-top":"1%","margin-bottom":"3%"},onClick:o[2]||(o[2]=r=>l.onSubmit())},{default:a(()=>[$]),_:1}),t(c,{to:{name:"Register"}},{default:a(()=>[t(i,{plain:""},{default:a(()=>[I]),_:1})]),_:1})]),_:1})}var U=g(V,[["render",L],["__scopeId","data-v-3b6e228d"]]);export{U as default};
